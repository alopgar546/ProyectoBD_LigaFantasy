-- MySQL Script generated by MySQL Workbench
-- Tue Mar 25 12:45:49 2025
-- Model: New Model	Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';



CREATE SCHEMA IF NOT EXISTS `ProyectoFinalBD_alg` DEFAULT CHARACTER SET utf8 ;
USE `ProyectoFinalBD_alg` ;

-- -----------------------------------------------------
-- Table `ProyectoFinalBD_alg`.`PLANTILLA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ProyectoFinalBD_alg`.`PLANTILLA` ;

CREATE TABLE IF NOT EXISTS `ProyectoFinalBD_alg`.`PLANTILLA` (
  `ID_PLANTILLA` INT NOT NULL,
  `FORMACION` VARCHAR(10) NULL,
  PRIMARY KEY (`ID_PLANTILLA`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ProyectoFinalBD_alg`.`USUARIO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ProyectoFinalBD_alg`.`USUARIO` ;

CREATE TABLE IF NOT EXISTS `ProyectoFinalBD_alg`.`USUARIO` (
  `ID_USUARIO` INT NOT NULL,
  `NOMBRE` VARCHAR(45) NULL DEFAULT NULL,
  `PRESUPUESTO` INT NULL DEFAULT NULL,
  `ID_ADMIN` INT NULL,
  `ID_PLANTILLA` INT NOT NULL,
  PRIMARY KEY (`ID_USUARIO`),
  INDEX `fk_USUARIO_USUARIO1_idx` (`ID_ADMIN` ASC) VISIBLE,
  INDEX `fk_USUARIO_PLANTILLA1_idx` (`ID_PLANTILLA` ASC) VISIBLE,
  CONSTRAINT `fk_USUARIO_USUARIO1`
	FOREIGN KEY (`ID_ADMIN`)
	REFERENCES `ProyectoFinalBD_alg`.`USUARIO` (`ID_USUARIO`)
	ON DELETE CASCADE
	ON UPDATE CASCADE,
  CONSTRAINT `fk_USUARIO_PLANTILLA1`
	FOREIGN KEY (`ID_PLANTILLA`)
	REFERENCES `ProyectoFinalBD_alg`.`PLANTILLA` (`ID_PLANTILLA`)
	ON DELETE CASCADE
	ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ProyectoFinalBD_alg`.`JUGADORES`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ProyectoFinalBD_alg`.`JUGADORES` ;

CREATE TABLE IF NOT EXISTS `ProyectoFinalBD_alg`.`JUGADORES` (
  `ID_JUGADORES` INT NOT NULL,
  `NOMBRE` VARCHAR(45) NULL DEFAULT NULL,
  `NACIONALIDAD` VARCHAR(45) NULL DEFAULT NULL,
  `POSICION` VARCHAR(25) NULL DEFAULT NULL,
  `EQUIPO` VARCHAR(45) NULL DEFAULT NULL,
  `GOLES` INT NULL DEFAULT NULL,
  `ASISTENCIAS` INT NULL DEFAULT NULL,
  `VALOR` INT NULL DEFAULT NULL,
  `ID_PROPIETARIO` INT NULL,
  PRIMARY KEY (`ID_JUGADORES`),
  INDEX `fk_JUGADORES_USUARIO1_idx` (`ID_PROPIETARIO` ASC) VISIBLE,
  CONSTRAINT `fk_JUGADORES_USUARIO1`
	FOREIGN KEY (`ID_PROPIETARIO`)
	REFERENCES `ProyectoFinalBD_alg`.`USUARIO` (`ID_USUARIO`)
	ON DELETE CASCADE
	ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ProyectoFinalBD_alg`.`TRASPASO_JUG`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ProyectoFinalBD_alg`.`TRASPASO_JUG` ;

CREATE TABLE IF NOT EXISTS `ProyectoFinalBD_alg`.`TRASPASO_JUG` (
  `ID_COMPRADOR` INT NULL,
  `ID_JUGADORES` INT NOT NULL,
  `ID_VENDEDOR` INT NULL,
  `FECHA_TRASPASO` DATETIME NOT NULL,
  `PRECIO_TRASPASO` INT NULL DEFAULT NULL,
  `ID_TRASPASO_JUG` INT NOT NULL,
  INDEX `fk_USUARIO_has_JUGADORES_JUGADORES1_idx` (`ID_JUGADORES` ASC) VISIBLE,
  INDEX `fk_USUARIO_has_JUGADORES_USUARIO1_idx` (`ID_COMPRADOR` ASC) VISIBLE,
  INDEX `fk_TRASPASO_JUG_USUARIO1_idx` (`ID_VENDEDOR` ASC) VISIBLE,
  PRIMARY KEY (`ID_TRASPASO_JUG`),
  CONSTRAINT `fk_USUARIO_has_JUGADORES_USUARIO1`
	FOREIGN KEY (`ID_COMPRADOR`)
	REFERENCES `ProyectoFinalBD_alg`.`USUARIO` (`ID_USUARIO`)
	ON DELETE CASCADE
	ON UPDATE CASCADE,
  CONSTRAINT `fk_USUARIO_has_JUGADORES_JUGADORES1`
	FOREIGN KEY (`ID_JUGADORES`)
	REFERENCES `ProyectoFinalBD_alg`.`JUGADORES` (`ID_JUGADORES`)
	ON DELETE CASCADE
	ON UPDATE CASCADE,
  CONSTRAINT `fk_TRASPASO_JUG_USUARIO1`
	FOREIGN KEY (`ID_VENDEDOR`)
	REFERENCES `ProyectoFinalBD_alg`.`USUARIO` (`ID_USUARIO`)
	ON DELETE CASCADE
	ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ProyectoFinalBD_alg`.`JORNADAS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ProyectoFinalBD_alg`.`JORNADAS` ;

CREATE TABLE IF NOT EXISTS `ProyectoFinalBD_alg`.`JORNADAS` (
  `NUM_JORNADA` INT NOT NULL,
  `FECHA_INICIO` DATE NULL DEFAULT NULL,
  `FECHA_FINAL` DATE NULL DEFAULT NULL,
  PRIMARY KEY (`NUM_JORNADA`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ProyectoFinalBD_alg`.`ENTRENADORES`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ProyectoFinalBD_alg`.`ENTRENADORES` ;

CREATE TABLE IF NOT EXISTS `ProyectoFinalBD_alg`.`ENTRENADORES` (
  `ID_ENTRENADORES` INT NOT NULL,
  `NOMBRE` VARCHAR(45) NULL DEFAULT NULL,
  `NACIONALIDAD` VARCHAR(45) NULL DEFAULT NULL,
  `EQUIPO` VARCHAR(45) NULL DEFAULT NULL,
  `VALOR` INT NULL DEFAULT NULL,
  `ID_PROPIETARIO` INT NULL,
  PRIMARY KEY (`ID_ENTRENADORES`),
  INDEX `fk_ENTRENADORES_USUARIO1_idx` (`ID_PROPIETARIO` ASC) VISIBLE,
  CONSTRAINT `fk_ENTRENADORES_USUARIO1`
	FOREIGN KEY (`ID_PROPIETARIO`)
	REFERENCES `ProyectoFinalBD_alg`.`USUARIO` (`ID_USUARIO`)
	ON DELETE CASCADE
	ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ProyectoFinalBD_alg`.`TRASPASO_ENT`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ProyectoFinalBD_alg`.`TRASPASO_ENT` ;

CREATE TABLE IF NOT EXISTS `ProyectoFinalBD_alg`.`TRASPASO_ENT` (
  `ID_COMPRADOR` INT NULL,
  `ID_ENTRENADORES` INT NOT NULL,
  `ID_VENDEDOR` INT NULL,
  `FECHA_TRASPASO` DATETIME NOT NULL,
  `PRECIO_TRASPASO` INT NULL DEFAULT NULL,
  `ID_TRASPASO_ENT` INT NOT NULL,
  INDEX `fk_USUARIO_has_ENTRENADORES_ENTRENADORES1_idx` (`ID_ENTRENADORES` ASC) VISIBLE,
  INDEX `fk_USUARIO_has_ENTRENADORES_USUARIO1_idx` (`ID_COMPRADOR` ASC) VISIBLE,
  INDEX `fk_TRASPASO_ENT_USUARIO1_idx` (`ID_VENDEDOR` ASC) VISIBLE,
  PRIMARY KEY (`ID_TRASPASO_ENT`),
  CONSTRAINT `fk_USUARIO_has_ENTRENADORES_USUARIO1`
	FOREIGN KEY (`ID_COMPRADOR`)
	REFERENCES `ProyectoFinalBD_alg`.`USUARIO` (`ID_USUARIO`)
	ON DELETE CASCADE
	ON UPDATE CASCADE,
  CONSTRAINT `fk_USUARIO_has_ENTRENADORES_ENTRENADORES1`
	FOREIGN KEY (`ID_ENTRENADORES`)
	REFERENCES `ProyectoFinalBD_alg`.`ENTRENADORES` (`ID_ENTRENADORES`)
	ON DELETE CASCADE
	ON UPDATE CASCADE,
  CONSTRAINT `fk_TRASPASO_ENT_USUARIO1`
	FOREIGN KEY (`ID_VENDEDOR`)
	REFERENCES `ProyectoFinalBD_alg`.`USUARIO` (`ID_USUARIO`)
	ON DELETE CASCADE
	ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ProyectoFinalBD_alg`.`CLASIFICACION_JUG`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ProyectoFinalBD_alg`.`CLASIFICACION_JUG` ;

CREATE TABLE IF NOT EXISTS `ProyectoFinalBD_alg`.`CLASIFICACION_JUG` (
  `ID_JUGADORES` INT NOT NULL,
  `NUM_JORNADA` INT NOT NULL,
  `PUNTOS` INT NULL DEFAULT NULL,
  PRIMARY KEY (`ID_JUGADORES`, `NUM_JORNADA`),
  INDEX `fk_JUGADORES_has_JORNADAS_JORNADAS1_idx` (`NUM_JORNADA` ASC) VISIBLE,
  INDEX `fk_JUGADORES_has_JORNADAS_JUGADORES_idx` (`ID_JUGADORES` ASC) VISIBLE,
  CONSTRAINT `fk_JUGADORES_has_JORNADAS_JUGADORES`
	FOREIGN KEY (`ID_JUGADORES`)
	REFERENCES `ProyectoFinalBD_alg`.`JUGADORES` (`ID_JUGADORES`)
	ON DELETE CASCADE
	ON UPDATE CASCADE,
  CONSTRAINT `fk_JUGADORES_has_JORNADAS_JORNADAS1`
	FOREIGN KEY (`NUM_JORNADA`)
	REFERENCES `ProyectoFinalBD_alg`.`JORNADAS` (`NUM_JORNADA`)
	ON DELETE CASCADE
	ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ProyectoFinalBD_alg`.`CLASIFICACION_ENT`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ProyectoFinalBD_alg`.`CLASIFICACION_ENT` ;

CREATE TABLE IF NOT EXISTS `ProyectoFinalBD_alg`.`CLASIFICACION_ENT` (
  `ID_ENTRENADORES` INT NOT NULL,
  `NUM_JORNADA` INT NOT NULL,
  `PUNTOS` INT NULL DEFAULT NULL,
  PRIMARY KEY (`NUM_JORNADA`, `ID_ENTRENADORES`),
  INDEX `fk_ENTRENADORES_has_JORNADAS_JORNADAS1_idx` (`NUM_JORNADA` ASC) VISIBLE,
  INDEX `fk_ENTRENADORES_has_JORNADAS_ENTRENADORES1_idx` (`ID_ENTRENADORES` ASC) VISIBLE,
  CONSTRAINT `fk_ENTRENADORES_has_JORNADAS_ENTRENADORES1`
	FOREIGN KEY (`ID_ENTRENADORES`)
	REFERENCES `ProyectoFinalBD_alg`.`ENTRENADORES` (`ID_ENTRENADORES`)
	ON DELETE CASCADE
	ON UPDATE CASCADE,
  CONSTRAINT `fk_ENTRENADORES_has_JORNADAS_JORNADAS1`
	FOREIGN KEY (`NUM_JORNADA`)
	REFERENCES `ProyectoFinalBD_alg`.`JORNADAS` (`NUM_JORNADA`)
	ON DELETE CASCADE
	ON UPDATE CASCADE)
ENGINE = InnoDB;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
